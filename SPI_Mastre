#include <SPI.h>

void setup() {
  Serial.begin(9600);
  SPI.begin();
  pinMode(10, OUTPUT);
  digitalWrite(10, HIGH);
}

void loop() {
  if (Serial.available()) {
    String data = Serial.readStringUntil('\n');
    

    digitalWrite(10, LOW);   

    for (int i = 0; i < data.length(); i++) {
      SPI.transfer(data[i]);
      delayMicroseconds(50);
    }

    SPI.transfer('\n');      
    digitalWrite(10, HIGH);  

  }
}
